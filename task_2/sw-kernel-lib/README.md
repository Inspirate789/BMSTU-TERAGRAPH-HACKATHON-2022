# Проект Тераграф. Библиотека RiscV в составе Graph Rocessor Core

## Общее описание

Библиотека для взаимодействия HOST систем с Graph Processor Core (XRT Runtime версия), используются аппаратные FIFO буферы по 512 слов и память External Memory.

Библиотека содержит стандартные общие для проектов исходные коды, сценарий линковки и makefile для сборки проекта.

Для получения законченного проекта требуется создание основного файла `gpc_test.c` и заголовка прерываний `gpc_handlers.h`.

## Установка в проект

Установка выполняется как модуля репозитория git:

```bash
git submodule add https://gitlab.com/leonhard-x64-xrt-v2/libraries/sw-kernel-lib.git
```

## Зависимости

Зависимости для сборки проекта:

* исходные файлы: основной `sw_kernel_main.c` и заголовок прерываний `gpc_handlers.h`
 
* набор средст сборки [riscv toolchain](https://gitlab.com/quantr/toolchain/riscv-gnu-toolchain) и экспорт исполняемых файлов в `PATH`

* набор библиотек [picolib](https://github.com/picolibc/picolibc) и экспорт в `C_INCLUDE_PATH`

* исходный текст проекта [taiga](https://github.gitop.top/taiga-project/taiga) и экспорт в переменную окружения `TAIGA_DIR`

Для стандартного пользователя ВМ студенческой команды хакатона все необходимые переменные окружения установлены по-умолчанию.

## Сборка проекта

Следует выполнить команду из директории проекта верхнего уровня:

```bash
make -C <Путь до этой директории библиотеки>
```

Пример:

```bash
make -C sw-kernel-lib
```

Результатом выполнения команды станет файл sw_kernel_main.rawbinary в директории проекта верхнего уровня.

| :exclamation:  Не забывайте синхронизировать версии исходного текста host и kernel составляющих проекта |
|---------------------------------------------------------------------------------------------------------|
